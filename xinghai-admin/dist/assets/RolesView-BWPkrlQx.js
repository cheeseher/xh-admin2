import{d as e,a,r as l,j as t,c as o,e as s,w as d,f as u,E as n,o as i,b as r,G as m,h as c,H as p,k as v,t as f,l as h,s as g,_ as b}from"./index-DdCtHfSO.js";const _={class:"roles-container"},k={class:"card-header"},y={class:"search-area"},C={class:"status-text"},w={class:"action-buttons"},V={class:"pagination-container"},x={class:"status-text"},B={class:"dialog-footer"},I={key:0},R={class:"permission-title"},z={class:"dialog-footer"},U=b(e({__name:"RolesView",setup(e){const b=a({name:"",status:""}),U=l([{roleId:"R001",name:"超级管理员",description:"拥有系统所有权限，可以管理所有功能和数据",userCount:2,status:"启用",statusBool:!0,createTime:"2023-12-01 10:00:00"},{roleId:"R002",name:"普通管理员",description:"拥有部分管理权限，可以管理部分功能和数据",userCount:5,status:"启用",statusBool:!0,createTime:"2023-12-05 14:30:00"},{roleId:"R003",name:"VIP用户",description:"高级会员，拥有特殊功能和服务",userCount:28,status:"启用",statusBool:!0,createTime:"2023-12-10 09:15:00"},{roleId:"R004",name:"普通用户",description:"基础会员，拥有基本功能和服务",userCount:156,status:"启用",statusBool:!0,createTime:"2023-12-15 16:45:00"},{roleId:"R005",name:"游客",description:"未注册用户，只能浏览部分内容",userCount:0,status:"禁用",statusBool:!1,createTime:"2023-12-20 11:20:00"}]),T=l(1),$=l(10),j=l(100),q=l(!1),H=l(!1),K=l("add"),P=l(),S=a({roleId:"",name:"",description:"",statusBool:!0}),D=a({name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"},{max:200,message:"长度不能超过 200 个字符",trigger:"blur"}]}),E=l(!1),F=l(null),G=l(),A=l([]),J=l([{id:1,name:"系统管理",children:[{id:11,name:"用户管理"},{id:12,name:"角色管理"},{id:13,name:"菜单管理"},{id:14,name:"部门管理"}]},{id:2,name:"内容管理",children:[{id:21,name:"文章管理"},{id:22,name:"分类管理"},{id:23,name:"标签管理"},{id:24,name:"评论管理"}]},{id:3,name:"商品管理",children:[{id:31,name:"商品列表"},{id:32,name:"商品分类"},{id:33,name:"商品规格"},{id:34,name:"商品评价"}]},{id:4,name:"订单管理",children:[{id:41,name:"订单列表"},{id:42,name:"订单设置"},{id:43,name:"退款管理"},{id:44,name:"物流管理"}]},{id:5,name:"统计分析",children:[{id:51,name:"销售统计"},{id:52,name:"用户统计"},{id:53,name:"商品统计"},{id:54,name:"搜索统计"}]}]),L=()=>{q.value=!0,setTimeout((()=>{q.value=!1,n.success("查询成功")}),500)},M=()=>{b.name="",b.status=""},N=()=>{K.value="add",S.roleId="",S.name="",S.description="",S.statusBool=!0,H.value=!0},O=()=>{if(G.value){G.value.getCheckedKeys(),G.value.getHalfCheckedKeys();n.success(`角色"${F.value.name}"的权限已更新`),E.value=!1}},Q=async()=>{P.value&&await P.value.validate(((e,a)=>{e&&("add"===K.value?n.success("新增角色成功"):n.success("编辑角色成功"),H.value=!1)}))},W=e=>{$.value=e,L()},X=e=>{T.value=e,L()};return t((()=>{L()})),(e,a)=>{const l=u("el-button"),t=u("el-input"),Y=u("el-form-item"),Z=u("el-option"),ee=u("el-select"),ae=u("el-form"),le=u("el-table-column"),te=u("el-switch"),oe=u("el-table"),se=u("el-pagination"),de=u("el-card"),ue=u("el-dialog"),ne=u("el-tree"),ie=p("loading");return i(),o("div",_,[s(de,{class:"box-card"},{header:d((()=>[r("div",k,[a[12]||(a[12]=r("span",null,"角色管理",-1)),s(l,{type:"primary",size:"small",onClick:N},{default:d((()=>a[11]||(a[11]=[c("新增角色")]))),_:1})])])),default:d((()=>[r("div",y,[s(ae,{inline:!0,model:b,class:"demo-form-inline"},{default:d((()=>[s(Y,{label:"角色名称"},{default:d((()=>[s(t,{modelValue:b.name,"onUpdate:modelValue":a[0]||(a[0]=e=>b.name=e),placeholder:"请输入角色名称",clearable:""},null,8,["modelValue"])])),_:1}),s(Y,{label:"角色状态"},{default:d((()=>[s(ee,{modelValue:b.status,"onUpdate:modelValue":a[1]||(a[1]=e=>b.status=e),placeholder:"请选择",clearable:""},{default:d((()=>[s(Z,{label:"全部",value:""}),s(Z,{label:"启用",value:"enabled"}),s(Z,{label:"禁用",value:"disabled"})])),_:1},8,["modelValue"])])),_:1}),s(Y,null,{default:d((()=>[s(l,{type:"primary",onClick:L},{default:d((()=>a[13]||(a[13]=[c("查询")]))),_:1}),s(l,{onClick:M},{default:d((()=>a[14]||(a[14]=[c("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),m((i(),v(oe,{data:U.value,style:{width:"100%"},border:"",stripe:""},{default:d((()=>[s(le,{type:"index",label:"序号",width:"60"}),s(le,{prop:"roleId",label:"角色ID",width:"100"}),s(le,{prop:"name",label:"角色名称",width:"150"}),s(le,{prop:"description",label:"角色描述","min-width":"200"}),s(le,{prop:"userCount",label:"用户数量",width:"100"}),s(le,{prop:"status",label:"状态",width:"100"},{default:d((e=>[s(te,{modelValue:e.row.statusBool,"onUpdate:modelValue":a=>e.row.statusBool=a,"active-value":!0,"inactive-value":!1,onChange:a=>((e,a)=>{const l=e?"启用":"禁用";n.success(`角色"${a.name}"已${l}`),a.status=e?"启用":"禁用"})(a,e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"]),r("span",C,f(e.row.statusBool?"启用":"禁用"),1)])),_:1}),s(le,{prop:"createTime",label:"创建时间",width:"180"}),s(le,{label:"操作",width:"280",fixed:"right"},{default:d((e=>[r("div",w,[s(l,{size:"small",onClick:a=>{return l=e.row,void n.info(`查看角色: ${l.name}`);var l}},{default:d((()=>a[15]||(a[15]=[c("查看")]))),_:2},1032,["onClick"]),s(l,{size:"small",type:"primary",onClick:a=>{return l=e.row,K.value="edit",S.roleId=l.roleId,S.name=l.name,S.description=l.description,S.statusBool=l.statusBool,void(H.value=!0);var l}},{default:d((()=>a[16]||(a[16]=[c("编辑")]))),_:2},1032,["onClick"]),s(l,{size:"small",type:"success",onClick:a=>{return l=e.row,F.value=l,"R001"===l.roleId?A.value=[11,12,13,14,21,22,23,24,31,32,33,34,41,42,43,44,51,52,53,54]:"R002"===l.roleId?A.value=[11,12,21,22,23,31,32,41,42,51]:"R003"===l.roleId?A.value=[21,22,23,31,32,41]:"R004"===l.roleId?A.value=[21,31,41]:A.value=[],void(E.value=!0);var l}},{default:d((()=>a[17]||(a[17]=[c("权限设置")]))),_:2},1032,["onClick"]),s(l,{size:"small",type:"danger",onClick:a=>{return l=e.row,void g.confirm(`确定要删除角色"${l.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{n({type:"success",message:`角色"${l.name}"已删除`})})).catch((()=>{n({type:"info",message:"已取消删除"})}));var l}},{default:d((()=>a[18]||(a[18]=[c("删除")]))),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])),[[ie,q.value]]),r("div",V,[s(se,{"current-page":T.value,"onUpdate:currentPage":a[2]||(a[2]=e=>T.value=e),"page-size":$.value,"onUpdate:pageSize":a[3]||(a[3]=e=>$.value=e),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:j.value,onSizeChange:W,onCurrentChange:X,background:!0},null,8,["current-page","page-size","total"])])])),_:1}),s(ue,{modelValue:H.value,"onUpdate:modelValue":a[8]||(a[8]=e=>H.value=e),title:"add"===K.value?"新增角色":"编辑角色",width:"500px"},{footer:d((()=>[r("span",B,[s(l,{onClick:a[7]||(a[7]=e=>H.value=!1)},{default:d((()=>a[19]||(a[19]=[c("取消")]))),_:1}),s(l,{type:"primary",onClick:Q},{default:d((()=>a[20]||(a[20]=[c("确定")]))),_:1})])])),default:d((()=>[s(ae,{model:S,"label-width":"100px",rules:D,ref_key:"roleFormRef",ref:P},{default:d((()=>[s(Y,{label:"角色名称",prop:"name"},{default:d((()=>[s(t,{modelValue:S.name,"onUpdate:modelValue":a[4]||(a[4]=e=>S.name=e),placeholder:"请输入角色名称"},null,8,["modelValue"])])),_:1}),s(Y,{label:"角色描述",prop:"description"},{default:d((()=>[s(t,{modelValue:S.description,"onUpdate:modelValue":a[5]||(a[5]=e=>S.description=e),type:"textarea",rows:3,placeholder:"请输入角色描述"},null,8,["modelValue"])])),_:1}),s(Y,{label:"角色状态"},{default:d((()=>[s(te,{modelValue:S.statusBool,"onUpdate:modelValue":a[6]||(a[6]=e=>S.statusBool=e)},null,8,["modelValue"]),r("span",x,f(S.statusBool?"启用":"禁用"),1)])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"]),s(ue,{modelValue:E.value,"onUpdate:modelValue":a[10]||(a[10]=e=>E.value=e),title:"权限设置",width:"600px"},{footer:d((()=>[r("span",z,[s(l,{onClick:a[9]||(a[9]=e=>E.value=!1)},{default:d((()=>a[21]||(a[21]=[c("取消")]))),_:1}),s(l,{type:"primary",onClick:O},{default:d((()=>a[22]||(a[22]=[c("保存")]))),_:1})])])),default:d((()=>[F.value?(i(),o("div",I,[r("p",R,"当前角色: "+f(F.value.name),1),s(ne,{ref_key:"permissionTreeRef",ref:G,data:J.value,"show-checkbox":"","node-key":"id","default-checked-keys":A.value,props:{label:"name",children:"children"}},null,8,["data","default-checked-keys"])])):h("",!0)])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-b015ec37"]]);export{U as default};
