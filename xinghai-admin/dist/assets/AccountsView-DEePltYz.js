import{d as e,a,r as l,n as s,j as t,c as r,e as o,w as n,f as u,o as d,b as i,G as m,F as p,C as c,h as v,H as g,k as b,t as f,l as h,E as V,s as _,_ as w}from"./index-DdCtHfSO.js";const y={class:"accounts-container"},k={class:"card-header"},x={class:"search-area"},I={class:"status-text"},U={class:"action-buttons"},B={class:"pagination-container"},C={class:"status-text"},$={class:"dialog-footer"},N=w(e({__name:"AccountsView",setup(e){const w=a({accountId:"",username:"",role:"",status:""}),N=l([{value:"超级管理员",label:"超级管理员"},{value:"管理员",label:"管理员"},{value:"运营",label:"运营"},{value:"客服",label:"客服"},{value:"财务",label:"财务"}]),z=l([{accountId:"A10001",username:"admin",realName:"张三",role:"超级管理员",email:"admin@example.com",phone:"138****1234",lastLoginTime:"2024-03-15 08:30:00",status:"正常",statusBool:!0,remark:"系统超级管理员",permissions:["data","orders","products","categories","users","members","templates","settings"]},{accountId:"A10002",username:"operator",realName:"李四",role:"运营",email:"operator@example.com",phone:"139****5678",lastLoginTime:"2024-03-14 16:45:00",status:"正常",statusBool:!0,remark:"负责日常运营工作",permissions:["data","orders","products","categories","users"]},{accountId:"A10003",username:"service",realName:"王五",role:"客服",email:"service@example.com",phone:"137****9012",lastLoginTime:"2024-03-15 09:15:00",status:"正常",statusBool:!0,remark:"负责客户服务",permissions:["data","orders","users"]},{accountId:"A10004",username:"finance",realName:"赵六",role:"财务",email:"finance@example.com",phone:"136****3456",lastLoginTime:"2024-03-14 14:20:00",status:"正常",statusBool:!0,remark:"负责财务管理",permissions:["data","orders"]},{accountId:"A10005",username:"test",realName:"测试账号",role:"管理员",email:"test@example.com",phone:"135****7890",lastLoginTime:"2024-03-10 11:30:00",status:"禁用",statusBool:!1,remark:"测试账号，已禁用",permissions:["data","orders","products","categories","users","members","templates"]}]),T=l(1),q=l(10),L=l(0),P=l(!1),A=e=>({"超级管理员":"danger","管理员":"warning","运营":"success","客服":"info","财务":"primary"}[e]||"info"),j=()=>{T.value=1,J()},D=()=>{w.accountId="",w.username="",w.role="",w.status="",T.value=1,J()},S=l(!1),E=l("add"),F=l(),H=a({accountId:"",username:"",realName:"",password:"",confirmPassword:"",phone:"",email:"",role:"",permissions:[],statusBool:!0,remark:""}),G=a({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"},{max:20,message:"长度不能超过 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(e,a,l)=>{a!==H.password?l(new Error("两次输入密码不一致")):l()},trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}],permissions:[{required:!0,message:"请选择权限",trigger:"change"},{type:"array",min:1,message:"至少选择一项权限",trigger:"change"}]}),M=()=>{E.value="add",H.accountId="",H.username="",H.realName="",H.password="",H.confirmPassword="",H.phone="",H.email="",H.role="",H.permissions=[],H.statusBool=!0,H.remark="",S.value=!0},R=async()=>{F.value&&await F.value.validate(((e,a)=>{e&&("add"===E.value?V.success("新增账户成功"):V.success("编辑账户成功"),S.value=!1)}))},J=()=>{P.value=!0,setTimeout((()=>{const e=z.value.filter((e=>{if(w.accountId&&!e.accountId.includes(w.accountId))return!1;if(w.username&&!e.username.includes(w.username))return!1;if(w.role&&e.role!==w.role)return!1;if(w.status){if("normal"===w.status&&"正常"!==e.status)return!1;if("disabled"===w.status&&"禁用"!==e.status)return!1}return!0}));L.value=e.length;const a=(T.value-1)*q.value,l=a+q.value;z.value=e.slice(a,l),P.value=!1}),500)},K=e=>{q.value=e,J()},O=e=>{T.value=e,J()};return s([()=>w.accountId,()=>w.username,()=>w.role,()=>w.status],(()=>{T.value=1,J()})),t((()=>{J()})),(e,a)=>{const l=u("el-button"),s=u("el-input"),t=u("el-form-item"),J=u("el-option"),Q=u("el-select"),W=u("el-form"),X=u("el-table-column"),Y=u("el-tag"),Z=u("el-switch"),ee=u("el-table"),ae=u("el-pagination"),le=u("el-card"),se=u("el-checkbox"),te=u("el-checkbox-group"),re=u("el-dialog"),oe=g("loading");return d(),r("div",y,[o(le,{class:"box-card"},{header:n((()=>[i("div",k,[a[19]||(a[19]=i("span",null,"账户管理",-1)),o(l,{type:"primary",size:"small",onClick:M},{default:n((()=>a[18]||(a[18]=[v("新增账户")]))),_:1})])])),default:n((()=>[a[25]||(a[25]=i("div",{class:"page-description"},[i("p",null,"管理系统的后台账户，包括管理员和操作员。您可以为不同角色的管理人员创建账户，并分配相应的权限。")],-1)),i("div",x,[o(W,{inline:!0,model:w,class:"demo-form-inline"},{default:n((()=>[o(t,{label:"账户ID"},{default:n((()=>[o(s,{modelValue:w.accountId,"onUpdate:modelValue":a[0]||(a[0]=e=>w.accountId=e),placeholder:"请输入账户ID",clearable:""},null,8,["modelValue"])])),_:1}),o(t,{label:"用户名"},{default:n((()=>[o(s,{modelValue:w.username,"onUpdate:modelValue":a[1]||(a[1]=e=>w.username=e),placeholder:"请输入用户名",clearable:""},null,8,["modelValue"])])),_:1}),o(t,{label:"角色"},{default:n((()=>[o(Q,{modelValue:w.role,"onUpdate:modelValue":a[2]||(a[2]=e=>w.role=e),placeholder:"请选择",clearable:"",style:{width:"168px"}},{default:n((()=>[o(J,{label:"全部",value:""}),(d(!0),r(p,null,c(N.value,(e=>(d(),b(J,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),o(t,{label:"状态"},{default:n((()=>[o(Q,{modelValue:w.status,"onUpdate:modelValue":a[3]||(a[3]=e=>w.status=e),placeholder:"请选择",clearable:"",style:{width:"168px"}},{default:n((()=>[o(J,{label:"全部",value:""}),o(J,{label:"正常",value:"normal"}),o(J,{label:"禁用",value:"disabled"})])),_:1},8,["modelValue"])])),_:1}),o(t,null,{default:n((()=>[o(l,{type:"primary",onClick:j},{default:n((()=>a[20]||(a[20]=[v("查询")]))),_:1}),o(l,{onClick:D},{default:n((()=>a[21]||(a[21]=[v("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),m((d(),b(ee,{data:z.value,style:{width:"100%"},border:"",stripe:""},{default:n((()=>[o(X,{type:"selection",width:"55"}),o(X,{prop:"accountId",label:"账户ID",width:"100"}),o(X,{prop:"username",label:"用户名",width:"120"}),o(X,{prop:"realName",label:"真实姓名",width:"120"}),o(X,{prop:"role",label:"角色",width:"120"},{default:n((e=>[o(Y,{type:A(e.row.role)},{default:n((()=>[v(f(e.row.role),1)])),_:2},1032,["type"])])),_:1}),o(X,{prop:"email",label:"邮箱","min-width":"180"}),o(X,{prop:"phone",label:"手机号",width:"120"}),o(X,{prop:"lastLoginTime",label:"最后登录时间",width:"180"}),o(X,{prop:"status",label:"状态",width:"100"},{default:n((e=>[o(Z,{modelValue:e.row.statusBool,"onUpdate:modelValue":a=>e.row.statusBool=a,"active-value":!0,"inactive-value":!1,onChange:a=>((e,a)=>{const l=e?"启用":"禁用";V.success(`账户"${a.username}"已${l}`),a.status=e?"正常":"禁用"})(a,e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"]),i("span",I,f(e.row.statusBool?"正常":"禁用"),1)])),_:1}),o(X,{label:"操作",width:"200",fixed:"right"},{default:n((e=>[i("div",U,[o(l,{size:"small",onClick:a=>{return l=e.row,void _.alert(`<div class="account-detail">\n      <div class="detail-section">\n        <h4>基本信息</h4>\n        <div class="detail-item">\n          <span class="label">账户ID：</span>\n          <span>${l.accountId}</span>\n        </div>\n        <div class="detail-item">\n          <span class="label">用户名：</span>\n          <span>${l.username}</span>\n        </div>\n        <div class="detail-item">\n          <span class="label">真实姓名：</span>\n          <span>${l.realName}</span>\n        </div>\n        <div class="detail-item">\n          <span class="label">角色：</span>\n          <span><el-tag size="small" type="${A(l.role)}">${l.role}</el-tag></span>\n        </div>\n        <div class="detail-item">\n          <span class="label">状态：</span>\n          <span>${l.status}</span>\n        </div>\n      </div>\n      \n      <div class="detail-section">\n        <h4>联系方式</h4>\n        <div class="detail-item">\n          <span class="label">手机号：</span>\n          <span>${l.phone}</span>\n        </div>\n        <div class="detail-item">\n          <span class="label">邮箱：</span>\n          <span>${l.email}</span>\n        </div>\n      </div>\n      \n      <div class="detail-section">\n        <h4>权限信息</h4>\n        <div class="detail-item permissions">\n          ${l.permissions.map((e=>`<el-tag size="small" style="margin: 2px">${{data:"数据概览",orders:"订单管理",products:"商品管理",categories:"分类管理",users:"用户管理",members:"会员设置",templates:"模板设置",settings:"系统设置"}[e]||e}</el-tag>`)).join("")}\n        </div>\n      </div>\n      \n      <div class="detail-section">\n        <h4>其他信息</h4>\n        <div class="detail-item">\n          <span class="label">最后登录：</span>\n          <span>${l.lastLoginTime}</span>\n        </div>\n        <div class="detail-item">\n          <span class="label">备注：</span>\n          <span>${l.remark||"无"}</span>\n        </div>\n      </div>\n    </div>`,"账户详情",{dangerouslyUseHTMLString:!0,confirmButtonText:"关闭",customClass:"account-detail-dialog"});var l}},{default:n((()=>a[22]||(a[22]=[v("查看")]))),_:2},1032,["onClick"]),o(l,{size:"small",type:"primary",onClick:a=>{return l=e.row,E.value="edit",H.accountId=l.accountId,H.username=l.username,H.realName=l.realName,H.phone=l.phone,H.email=l.email,H.role=l.role,H.permissions=[...l.permissions],H.statusBool=l.statusBool,H.remark=l.remark||"",void(S.value=!0);var l}},{default:n((()=>a[23]||(a[23]=[v("编辑")]))),_:2},1032,["onClick"]),o(l,{size:"small",type:"danger",onClick:a=>{return l=e.row,void _.confirm(`确定要删除账户"${l.username}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{V({type:"success",message:`账户"${l.username}"已删除`})})).catch((()=>{V({type:"info",message:"已取消删除"})}));var l}},{default:n((()=>a[24]||(a[24]=[v("删除")]))),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])),[[oe,P.value]]),i("div",B,[o(ae,{"current-page":T.value,"onUpdate:currentPage":a[4]||(a[4]=e=>T.value=e),"page-size":q.value,"onUpdate:pageSize":a[5]||(a[5]=e=>q.value=e),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:L.value,onSizeChange:K,onCurrentChange:O,background:!0},null,8,["current-page","page-size","total"])])])),_:1}),o(re,{modelValue:S.value,"onUpdate:modelValue":a[17]||(a[17]=e=>S.value=e),title:"add"===E.value?"新增账户":"编辑账户",width:"650px"},{footer:n((()=>[i("span",$,[o(l,{onClick:a[16]||(a[16]=e=>S.value=!1)},{default:n((()=>a[34]||(a[34]=[v("取消")]))),_:1}),o(l,{type:"primary",onClick:R},{default:n((()=>a[35]||(a[35]=[v("确定")]))),_:1})])])),default:n((()=>[o(W,{model:H,"label-width":"100px",rules:G,ref_key:"accountFormRef",ref:F},{default:n((()=>[o(t,{label:"用户名",prop:"username"},{default:n((()=>[o(s,{modelValue:H.username,"onUpdate:modelValue":a[6]||(a[6]=e=>H.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),o(t,{label:"真实姓名",prop:"realName"},{default:n((()=>[o(s,{modelValue:H.realName,"onUpdate:modelValue":a[7]||(a[7]=e=>H.realName=e),placeholder:"请输入真实姓名"},null,8,["modelValue"])])),_:1}),"add"===E.value?(d(),b(t,{key:0,label:"密码",prop:"password"},{default:n((()=>[o(s,{modelValue:H.password,"onUpdate:modelValue":a[8]||(a[8]=e=>H.password=e),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})):h("",!0),"add"===E.value?(d(),b(t,{key:1,label:"确认密码",prop:"confirmPassword"},{default:n((()=>[o(s,{modelValue:H.confirmPassword,"onUpdate:modelValue":a[9]||(a[9]=e=>H.confirmPassword=e),type:"password",placeholder:"请再次输入密码"},null,8,["modelValue"])])),_:1})):h("",!0),o(t,{label:"手机号",prop:"phone"},{default:n((()=>[o(s,{modelValue:H.phone,"onUpdate:modelValue":a[10]||(a[10]=e=>H.phone=e),placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),o(t,{label:"邮箱",prop:"email"},{default:n((()=>[o(s,{modelValue:H.email,"onUpdate:modelValue":a[11]||(a[11]=e=>H.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])])),_:1}),o(t,{label:"角色",prop:"role"},{default:n((()=>[o(Q,{modelValue:H.role,"onUpdate:modelValue":a[12]||(a[12]=e=>H.role=e),placeholder:"请选择角色",style:{width:"168px"}},{default:n((()=>[(d(!0),r(p,null,c(N.value,(e=>(d(),b(J,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),o(t,{label:"权限设置",prop:"permissions"},{default:n((()=>[o(te,{modelValue:H.permissions,"onUpdate:modelValue":a[13]||(a[13]=e=>H.permissions=e)},{default:n((()=>[o(se,{label:"data"},{default:n((()=>a[26]||(a[26]=[v("数据概览")]))),_:1}),o(se,{label:"orders"},{default:n((()=>a[27]||(a[27]=[v("订单管理")]))),_:1}),o(se,{label:"products"},{default:n((()=>a[28]||(a[28]=[v("商品管理")]))),_:1}),o(se,{label:"categories"},{default:n((()=>a[29]||(a[29]=[v("分类管理")]))),_:1}),o(se,{label:"users"},{default:n((()=>a[30]||(a[30]=[v("用户管理")]))),_:1}),o(se,{label:"members"},{default:n((()=>a[31]||(a[31]=[v("会员设置")]))),_:1}),o(se,{label:"templates"},{default:n((()=>a[32]||(a[32]=[v("模板设置")]))),_:1}),o(se,{label:"settings"},{default:n((()=>a[33]||(a[33]=[v("系统设置")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),o(t,{label:"状态"},{default:n((()=>[o(Z,{modelValue:H.statusBool,"onUpdate:modelValue":a[14]||(a[14]=e=>H.statusBool=e)},null,8,["modelValue"]),i("span",C,f(H.statusBool?"正常":"禁用"),1)])),_:1}),o(t,{label:"备注",prop:"remark"},{default:n((()=>[o(s,{modelValue:H.remark,"onUpdate:modelValue":a[15]||(a[15]=e=>H.remark=e),type:"textarea",rows:3,placeholder:"请输入备注信息"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-597fbbfa"]]);export{N as default};
