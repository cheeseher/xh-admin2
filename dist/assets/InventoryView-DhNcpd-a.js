import{d as e,a as l,r as a,j as t,c as d,e as u,w as o,f as r,o as s,b as n,H as i,F as c,D as p,h as m,J as f,k as v,t as _,g as h,X as b,N as g,Y as y,E as k,s as w,_ as V}from"./index-Lit_3WrB.js";const I={class:"inventory-container"},x={class:"card-header"},C={class:"header-buttons"},U={class:"search-area"},T={class:"action-buttons"},z={class:"pagination-container"},B={class:"batch-actions"},j={class:"import-container"},q={class:"dialog-footer"},D={class:"dialog-footer"},N=V(e({__name:"InventoryView",setup(e){const V=l({productId:"",status:""}),N=a([{id:1,name:"谷歌邮箱 - 美国地区"},{id:2,name:"谷歌邮箱 - 欧洲地区"},{id:3,name:"微软邮箱 - 美国地区"}]),F=a([{id:"C0000001",cardInfo:"henduohao2014----henduohao888----henduohao@outlook.com----henduohao888",productId:1,productName:"谷歌邮箱 - 美国地区",status:"unsold",createTime:"2024-03-10 10:00:00",remark:"批量导入"}]),S=a(1),E=a(10),H=a(0),J=a(!1),O=a(!1),P=a([]),R=l({productId:"",remark:""}),X=a(!1),Y=a("add"),$=a(),A=l({id:0,cardInfo:"",productId:"",status:"unsold",remark:""}),G=l({cardInfo:[{required:!0,message:"请输入卡密信息",trigger:"blur"}],productId:[{required:!0,message:"请选择关联商品",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}),K=()=>{S.value=1,M()},L=()=>{V.productId="",V.status="",S.value=1,M()},M=()=>{J.value=!0,setTimeout((()=>{J.value=!1}),500)},Q=()=>{O.value=!0},W=e=>{P.value=[e]},Z=()=>{R.productId?(k.success("导入成功"),O.value=!1):k.warning("请选择关联商品")},ee=()=>{Y.value="add",A.id=0,A.cardInfo="",A.productId="",A.status="unsold",A.remark="",X.value=!0},le=()=>{k.success("导出成功")},ae=()=>{w.confirm("确定要批量删除选中的库存吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{k.success("批量删除成功")})).catch((()=>{k.info("已取消删除")}))},te=async()=>{$.value&&await $.value.validate(((e,l)=>{e&&("add"===Y.value?k.success("新增库存成功"):k.success("编辑库存成功"),X.value=!1)}))},de=e=>{E.value=e,M()},ue=e=>{S.value=e,M()};return t((()=>{M()})),(e,l)=>{const a=r("el-icon"),t=r("el-button"),M=r("el-option"),oe=r("el-select"),re=r("el-form-item"),se=r("el-form"),ne=r("el-table-column"),ie=r("el-tag"),ce=r("el-table"),pe=r("el-pagination"),me=r("el-card"),fe=r("el-input"),ve=r("el-upload"),_e=r("el-dialog"),he=f("loading");return s(),d("div",I,[u(me,{class:"box-card"},{header:o((()=>[n("div",x,[l[16]||(l[16]=n("span",null,"库存管理",-1)),n("div",C,[u(t,{type:"success",onClick:Q},{default:o((()=>[u(a,null,{default:o((()=>[u(h(b))])),_:1}),l[14]||(l[14]=m("批量导入 "))])),_:1}),u(t,{type:"primary",onClick:ee},{default:o((()=>[u(a,null,{default:o((()=>[u(h(g))])),_:1}),l[15]||(l[15]=m("新增库存 "))])),_:1})])])])),default:o((()=>[l[24]||(l[24]=n("div",{class:"page-description"},[n("p",null,"管理所有商品的库存账号，您可以添加、导入新的账号，并查看账号的销售状态。")],-1)),n("div",U,[u(se,{inline:!0,model:V,class:"demo-form-inline"},{default:o((()=>[u(re,{label:"关联商品"},{default:o((()=>[u(oe,{modelValue:V.productId,"onUpdate:modelValue":l[0]||(l[0]=e=>V.productId=e),placeholder:"请选择商品",clearable:"",style:{width:"240px"}},{default:o((()=>[u(M,{label:"全部",value:""}),(s(!0),d(c,null,p(N.value,(e=>(s(),v(M,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(re,{label:"销售状态"},{default:o((()=>[u(oe,{modelValue:V.status,"onUpdate:modelValue":l[1]||(l[1]=e=>V.status=e),placeholder:"请选择",clearable:"",style:{width:"168px"}},{default:o((()=>[u(M,{label:"全部",value:""}),u(M,{label:"未售出",value:"unsold"}),u(M,{label:"已售出",value:"sold"})])),_:1},8,["modelValue"])])),_:1}),u(re,null,{default:o((()=>[u(t,{type:"primary",onClick:K},{default:o((()=>l[17]||(l[17]=[m("查询")]))),_:1}),u(t,{onClick:L},{default:o((()=>l[18]||(l[18]=[m("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),i((s(),v(ce,{data:F.value,style:{width:"100%"},border:"",stripe:""},{default:o((()=>[u(ne,{type:"selection",width:"55"}),u(ne,{prop:"id",label:"卡密ID",width:"80"}),u(ne,{prop:"productName",label:"关联商品","min-width":"180"}),u(ne,{prop:"status",label:"状态",width:"100"},{default:o((e=>[u(ie,{type:"unsold"===e.row.status?"success":"info"},{default:o((()=>[m(_("unsold"===e.row.status?"未售出":"已售出"),1)])),_:2},1032,["type"])])),_:1}),u(ne,{prop:"cardInfo",label:"卡密信息","min-width":"300"},{default:o((e=>[u(t,{link:"",type:"primary",onClick:l=>{return a=e.row,void w.alert(a.cardInfo,"卡密信息",{confirmButtonText:"确定"});var a}},{default:o((()=>l[19]||(l[19]=[m("查看")]))),_:2},1032,["onClick"])])),_:1}),u(ne,{prop:"createTime",label:"添加时间",width:"180"}),u(ne,{prop:"remark",label:"备注","min-width":"120"}),u(ne,{label:"操作",width:"180",fixed:"right"},{default:o((e=>[n("div",T,[u(t,{size:"small",type:"primary",onClick:l=>{return a=e.row,Y.value="edit",Object.assign(A,a),void(X.value=!0);var a}},{default:o((()=>l[20]||(l[20]=[m("编辑")]))),_:2},1032,["onClick"]),u(t,{size:"small",type:"danger",onClick:l=>{return a=e.row,void w.confirm(`确定要删除ID为"${a.id}"的库存吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{k.success("删除成功")})).catch((()=>{k.info("已取消删除")}));var a}},{default:o((()=>l[21]||(l[21]=[m("删除")]))),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])),[[he,J.value]]),n("div",z,[n("div",B,[u(t,{type:"success",onClick:le},{default:o((()=>l[22]||(l[22]=[m("导出数据")]))),_:1}),u(t,{type:"danger",onClick:ae},{default:o((()=>l[23]||(l[23]=[m("批量删除")]))),_:1})]),u(pe,{"current-page":S.value,"onUpdate:currentPage":l[2]||(l[2]=e=>S.value=e),"page-size":E.value,"onUpdate:pageSize":l[3]||(l[3]=e=>E.value=e),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:H.value,onSizeChange:de,onCurrentChange:ue,background:!0},null,8,["current-page","page-size","total"])])])),_:1}),u(_e,{modelValue:O.value,"onUpdate:modelValue":l[7]||(l[7]=e=>O.value=e),title:"批量导入账号",width:"600px"},{footer:o((()=>[n("span",q,[u(t,{onClick:l[6]||(l[6]=e=>O.value=!1)},{default:o((()=>l[27]||(l[27]=[m("取消")]))),_:1}),u(t,{type:"primary",onClick:Z},{default:o((()=>l[28]||(l[28]=[m("确定导入")]))),_:1})])])),default:o((()=>[n("div",j,[u(se,{model:R,"label-width":"100px"},{default:o((()=>[u(re,{label:"关联商品",required:""},{default:o((()=>[u(oe,{modelValue:R.productId,"onUpdate:modelValue":l[4]||(l[4]=e=>R.productId=e),placeholder:"请选择商品",style:{width:"100%"}},{default:o((()=>[(s(!0),d(c,null,p(N.value,(e=>(s(),v(M,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(re,{label:"备注"},{default:o((()=>[u(fe,{modelValue:R.remark,"onUpdate:modelValue":l[5]||(l[5]=e=>R.remark=e),type:"textarea",placeholder:"请输入批量导入的备注信息"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),u(ve,{class:"upload-demo",drag:"",action:"/api/inventory/import","auto-upload":!1,"on-change":W,"file-list":P.value},{tip:o((()=>l[25]||(l[25]=[n("div",{class:"el-upload__tip"},[m(" 支持.txt、.csv格式，每行一个卡密信息，格式根据商品类型不同而不同，例如："),n("br"),m(" Twitter账号格式：用户名----密码----注册邮箱----邮箱密码 ")],-1)]))),default:o((()=>[u(a,{class:"el-icon--upload"},{default:o((()=>[u(h(y))])),_:1}),l[26]||(l[26]=n("div",{class:"el-upload__text"},[m(" 将文件拖到此处，或"),n("em",null,"点击上传")],-1))])),_:1},8,["file-list"])])])),_:1},8,["modelValue"]),u(_e,{modelValue:X.value,"onUpdate:modelValue":l[13]||(l[13]=e=>X.value=e),title:"add"===Y.value?"新增库存":"编辑库存",width:"500px"},{footer:o((()=>[n("span",D,[u(t,{onClick:l[12]||(l[12]=e=>X.value=!1)},{default:o((()=>l[29]||(l[29]=[m("取消")]))),_:1}),u(t,{type:"primary",onClick:te},{default:o((()=>l[30]||(l[30]=[m("确定")]))),_:1})])])),default:o((()=>[u(se,{model:A,"label-width":"100px",rules:G,ref_key:"editFormRef",ref:$},{default:o((()=>[u(re,{label:"卡密信息",prop:"cardInfo"},{default:o((()=>[u(fe,{modelValue:A.cardInfo,"onUpdate:modelValue":l[8]||(l[8]=e=>A.cardInfo=e),type:"textarea",rows:4,placeholder:"请输入卡密信息，格式：用户名----密码----注册邮箱----邮箱密码"},null,8,["modelValue"])])),_:1}),u(re,{label:"关联商品",prop:"productId"},{default:o((()=>[u(oe,{modelValue:A.productId,"onUpdate:modelValue":l[9]||(l[9]=e=>A.productId=e),placeholder:"请选择商品",style:{width:"100%"}},{default:o((()=>[(s(!0),d(c,null,p(N.value,(e=>(s(),v(M,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(re,{label:"状态",prop:"status"},{default:o((()=>[u(oe,{modelValue:A.status,"onUpdate:modelValue":l[10]||(l[10]=e=>A.status=e),placeholder:"请选择状态",style:{width:"100%"}},{default:o((()=>[u(M,{label:"未售出",value:"unsold"}),u(M,{label:"已售出",value:"sold"})])),_:1},8,["modelValue"])])),_:1}),u(re,{label:"备注",prop:"remark"},{default:o((()=>[u(fe,{modelValue:A.remark,"onUpdate:modelValue":l[11]||(l[11]=e=>A.remark=e),type:"textarea",placeholder:"请输入备注信息"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-8a10cedd"]]);export{N as default};
