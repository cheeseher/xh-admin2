import{d as e,a as l,r as a,n as t,i,j as r,K as o,c as s,e as n,w as c,f as u,o as d,b as p,H as m,h,J as f,k as g,t as w,l as y,q as v,F as b,D as P,g as k,L as _,M as V,N as x,O as M,P as q,Q as G,R as I,S as T,B as C,T as U,U as F,V as W,W as z,E as S,s as B,u as $,_ as D}from"./index-Lit_3WrB.js";import{Q as A}from"./vue-quill.snow-DtCwzJgX.js";const j={class:"products-container"},N={class:"card-header"},L={class:"search-area"},R={class:"price-container"},O={class:"current-price"},H={key:0,class:"original-price"},Q={class:"wholesale-popover"},X={class:"wholesale-popover-quantity"},E={class:"wholesale-popover-price"},J={key:1,class:"no-data"},K={class:"status-text"},Y={class:"action-buttons"},Z={class:"pagination-container"},ee={class:"price-validation-header"},le={key:0},ae={key:1},te={key:2},ie={key:0},re={key:1},oe={key:1},se={key:1},ne={class:"wholesale-header"},ce={class:"wholesale-header-left"},ue={key:0,class:"wholesale-description"},de={class:"current-price-text"},pe={key:1,class:"wholesale-table-container"},me={class:"wholesale-input-group"},he={class:"wholesale-input-group"},fe={class:"wholesale-preview"},ge={class:"wholesale-preview-content"},we={key:2,class:"wholesale-empty"},ye={class:"editor-container"},ve={class:"editor-header"},be={class:"tab-content"},Pe={class:"template-selector"},ke={class:"template-option"},_e={key:0,class:"template-info"},Ve={style:{"margin-left":"5px"}},xe={key:1,class:"template-info"},Me={class:"tab-content"},qe={class:"template-actions"},Ge={class:"template-option"},Ie={class:"template-extra-actions"},Te={class:"template-info"},Ce={key:0,class:"editor-overlay"},Ue={class:"status-text"},Fe=["innerHTML"],We={class:"dialog-footer"},ze=D(e({__name:"ProductsView",setup(e){const D=l({name:"",category:"",deliveryMethod:"",status:"",stockWarningStatus:""}),ze=a([{id:"P000001",name:"Gmail邮箱-稳定可用 (手工)",category:"谷歌邮箱",currentPrice:4.2,originalPrice:6.5,stock:384,stockWarning:50,sales:368,deliveryMethod:"手动发货",feature:"稳定可用",specialNote:"支持自定义密码，支持换绑手机",description:"Gmail是Google提供的免费电子邮件服务，以下是使用Gmail账号的基本说明...",instructions:"登录步骤：\n1. 访问 https://mail.google.com\n2. 输入您购买的Gmail账号\n3. 输入对应的密码\n4. 如果提示需要验证，请按照提示完成验证步骤",afterSaleInfo:"本店所售Gmail账号均为稳定可用账号，购买后7天内提供更换服务。",disclaimer:"请勿将账号用于非法用途，账号被封禁概不负责。",status:"上架中",statusBool:!0,createTime:"2024-03-01 10:00:00",wholesalePrices:[{quantity:10,price:3.9},{quantity:50,price:3.7},{quantity:100,price:3.5}],templateMode:"bind",templateId:2,costPrice:2.5,remark:"优质账号，稳定性高"},{id:"P000002",name:"Gmail邮箱-稳定可用",category:"谷歌邮箱",currentPrice:2.75,originalPrice:4,stock:575,stockWarning:100,sales:292,deliveryMethod:"自动发货",feature:"稳定可用",specialNote:"支持自定义密码",description:"Gmail是Google提供的免费电子邮件服务，以下是使用Gmail账号的基本说明...",instructions:"登录步骤：\n1. 访问 https://mail.google.com\n2. 输入您购买的Gmail账号\n3. 输入对应的密码\n4. 如果提示需要验证，请按照提示完成验证步骤",afterSaleInfo:"本店所售Gmail账号均为稳定可用账号，购买后3天内提供更换服务。",disclaimer:"请勿将账号用于非法用途，账号被封禁概不负责。",status:"上架中",statusBool:!0,createTime:"2024-03-02 09:30:00",wholesalePrices:[{quantity:10,price:2.5},{quantity:50,price:2.3},{quantity:100,price:2}],templateMode:"custom",templateId:0,costPrice:1.5,remark:"热销产品，适合批量采购"},{id:"P000003",name:"Gmail邮箱-1月以上",category:"谷歌邮箱",currentPrice:5.5,originalPrice:8,stock:23,sales:256,deliveryMethod:"自动发货",feature:"1个月以上",specialNote:"支持自定义密码，支持换绑手机",description:"Gmail是Google提供的免费电子邮件服务，以下是使用Gmail账号的基本说明...",instructions:"登录步骤：\n1. 访问 https://mail.google.com\n2. 输入您购买的Gmail账号\n3. 输入对应的密码\n4. 如果提示需要验证，请按照提示完成验证步骤",afterSaleInfo:"本店所售Gmail账号均为稳定可用账号，购买后15天内提供更换服务。",disclaimer:"请勿将账号用于非法用途，账号被封禁概不负责。",status:"上架中",statusBool:!0,createTime:"2024-03-03 09:00:00",wholesalePrices:[{quantity:10,price:5.2},{quantity:50,price:5},{quantity:100,price:4.8}],templateMode:"bind",templateId:2},{id:"P000004",name:"Gmail邮箱-半年以上",category:"谷歌邮箱",currentPrice:7.5,originalPrice:12,stock:740,sales:198,deliveryMethod:"自动发货",feature:"半年以上",status:"上架中",statusBool:!0,createTime:"2024-03-04 08:30:00",wholesalePrices:[{quantity:10,price:7.35},{quantity:50,price:7.05},{quantity:100,price:6.75}],templateMode:"custom",templateId:0},{id:"P000005",name:"Gmail邮箱-美国稳定",category:"谷歌邮箱",currentPrice:10,originalPrice:18,stock:1060,sales:165,deliveryMethod:"自动发货",feature:"美国地区",status:"上架中",statusBool:!0,createTime:"2024-03-05 08:00:00",templateMode:"custom",templateId:0},{id:"P000006",name:"Gmail邮箱-一年以上",category:"谷歌邮箱",currentPrice:12,originalPrice:15,stock:872,sales:142,deliveryMethod:"自动发货",feature:"一年以上",status:"上架中",statusBool:!0,createTime:"2024-03-06 08:00:00",templateMode:"custom",templateId:0},{id:"P000007",name:"Gmail美国老号 (6个月+)",category:"谷歌邮箱",currentPrice:16.88,originalPrice:30,stock:138,sales:98,deliveryMethod:"自动发货",feature:"老号",status:"上架中",statusBool:!0,createTime:"2024-03-07 08:00:00",templateMode:"custom",templateId:0},{id:"P000008",name:"2022年老号账号-谷歌邮箱",category:"谷歌邮箱",currentPrice:14,originalPrice:20,stock:52,sales:76,deliveryMethod:"自动发货",feature:"老号",status:"上架中",statusBool:!0,createTime:"2024-03-08 08:00:00",templateMode:"custom",templateId:0}]),Se=a(1),Be=a(10),$e=a(0),De=a(!1),Ae=a(!1),je=a("add"),Ne=a(),Le=l({id:0,name:"",category:"",currentPrice:0,originalPrice:0,stock:0,sales:0,deliveryMethod:"自动发货",feature:"",specialNote:"",description:"",instructions:"",afterSaleInfo:"",disclaimer:"",status:"上架中",statusBool:!0,createTime:"",wholesalePrices:[],templateMode:"custom",templateId:0,costPrice:0,stockWarning:0,remark:""});t((()=>Le),(()=>{Array.isArray(Le.wholesalePrices)||(Le.wholesalePrices=[])}),{deep:!0,immediate:!0});const Re=l({name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:2,max:100,message:"长度在 2 到 100 个字符",trigger:"blur"}],category:[{required:!0,message:"请选择商品分类",trigger:"change"}],currentPrice:[{required:!0,message:"请设置商品价格",trigger:"blur"}],stockWarning:[{required:!0,message:"请设置库存预警值",trigger:"blur"}]}),Oe=()=>{De.value=!0,setTimeout((()=>{const e=ze.value.filter((e=>{if(D.name&&!e.name.includes(D.name))return!1;if(D.category){if("gmail"===D.category&&"谷歌邮箱"!==e.category)return!1;if("microsoft"===D.category&&"微软邮箱"!==e.category)return!1;if("instagram"===D.category&&"Instagram账号"!==e.category)return!1;if("twitter"===D.category&&"Twitter账号"!==e.category)return!1;if("facebook"===D.category&&"Facebook账号"!==e.category)return!1;if("other"===D.category&&["谷歌邮箱","微软邮箱","Instagram账号","Twitter账号","Facebook账号"].includes(e.category))return!1}if(D.deliveryMethod&&e.deliveryMethod!==D.deliveryMethod)return!1;if(D.status){if("on"===D.status&&"上架中"!==e.status)return!1;if("off"===D.status&&"已下架"!==e.status)return!1}if(D.stockWarningStatus){if("warning"===D.stockWarningStatus&&e.stock<e.stockWarning)return!1;if("normal"===D.stockWarningStatus&&e.stock>=e.stockWarning)return!1}return!0}));$e.value=e.length;const l=(Se.value-1)*Be.value,a=l+Be.value;ze.value=e.slice(l,a),De.value=!1}),500)},He=()=>{Se.value=1,Oe()},Qe=()=>{D.name="",D.category="",D.deliveryMethod="",D.status="",D.stockWarningStatus="",Se.value=1,Oe()},Xe=()=>{je.value="add",Ee(),Ae.value=!0},Ee=()=>{Le.id=0,Le.name="",Le.category="",Le.currentPrice=0,Le.originalPrice=0,Le.stock=0,Le.sales=0,Le.deliveryMethod="自动发货",Le.feature="",Le.specialNote="",Le.description="",Le.instructions="",Le.afterSaleInfo="",Le.disclaimer="",Le.status="上架中",Le.statusBool=!0,Le.createTime="",Le.wholesalePrices=[],Le.templateMode="custom",Le.templateId=0,Le.costPrice=0,Le.stockWarning=0,Le.remark=""},Je=async()=>{Ne.value&&await Ne.value.validate(((e,l)=>{e&&("bind"===Le.templateMode&&Le.templateId,"add"===je.value?S.success("新增商品成功"):S.success("编辑商品成功"),Ae.value=!1)}))},Ke=e=>{Be.value=e,Oe()},Ye=e=>{Se.value=e,Oe()};t([()=>D.name,()=>D.category,()=>D.deliveryMethod,()=>D.status,()=>D.stockWarningStatus],(()=>{Se.value=1,Oe()}));const Ze=a(!1),el={modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]},placeholder:"请输入商品详情..."},ll=o(),al=$(),tl=a([{id:1,name:"通用商品模板",category:"",content:'\n<h2>商品介绍</h2>\n<p>这是一个高质量的账号，具有以下特点...</p>\n\n<h2>账号规格</h2>\n<ul>\n  <li>账号类型：${category}</li>\n</ul>\n\n<h2>使用说明</h2>\n<ol>\n  <li>购买成功后，系统将自动发送账号信息到您的邮箱</li>\n  <li>收到账号后请立即修改密码</li>\n  <li>请勿在账号中存储重要个人信息</li>\n  <li>如有登录问题，请及时联系客服</li>\n</ol>\n\n<h2>售后说明</h2>\n<p>1. 售后保障期：自购买之日起30天内</p>\n<p>2. 售后范围：账号无法登录、功能与描述不符</p>\n<p>3. 售后流程：请通过"我的订单"-"申请售后"提交申请</p>\n<p>4. 不支持售后的情况：</p>\n<ul>\n  <li>超出保障期的账号问题</li>\n  <li>因用户操作不当导致的账号问题</li>\n  <li>账号被用于违规用途</li>\n</ul>\n\n<h2>免责声明</h2>\n<p>1. 本平台仅提供账号交易服务，不对账号的后续使用负责</p>\n<p>2. 请遵守相关法律法规和平台规则使用账号</p>\n<p>3. 禁止将账号用于任何违法违规活动</p>\n<p>4. 平台保留对违规用户追究法律责任的权利</p>\n'},{id:2,name:"Gmail邮箱模板",category:"谷歌邮箱",content:"\n<h2>Gmail邮箱介绍</h2>\n<p>Gmail是Google提供的免费电子邮件服务，以下是使用Gmail账号的基本说明...</p>\n\n<h2>账号规格</h2>\n<ul>\n  <li>账号类型：谷歌邮箱</li>\n</ul>\n\n<h2>使用说明</h2>\n<ol>\n  <li>购买成功后，系统将自动发送账号信息到您的邮箱</li>\n  <li>收到账号后请立即修改密码</li>\n  <li>请勿在账号中存储重要个人信息</li>\n  <li>如有登录问题，请及时联系客服</li>\n</ol>\n\n<h2>登录步骤</h2>\n<ol>\n  <li>访问 https://mail.google.com</li>\n  <li>输入您购买的Gmail账号</li>\n  <li>输入对应的密码</li>\n  <li>如果提示需要验证，请按照提示完成验证步骤</li>\n</ol>\n\n<h2>售后说明</h2>\n<p>本店所售Gmail账号均为稳定可用账号，购买后7天内提供更换服务。</p>\n\n<h2>免责声明</h2>\n<p>请勿将账号用于非法用途，账号被封禁概不负责。</p>\n"},{id:3,name:"社交媒体账号模板",category:"Instagram账号",content:"\n<h2>社交媒体账号介绍</h2>\n<p>这是一个高质量的社交媒体账号，具有以下特点...</p>\n\n<h2>账号规格</h2>\n<ul>\n  <li>账号类型：${category}</li>\n</ul>\n\n<h2>使用说明</h2>\n<ol>\n  <li>购买成功后，系统将自动发送账号信息到您的邮箱</li>\n  <li>收到账号后请立即修改密码和邮箱</li>\n  <li>请勿在账号中存储重要个人信息</li>\n  <li>如有登录问题，请及时联系客服</li>\n</ol>\n\n<h2>注意事项</h2>\n<ul>\n  <li>请勿短时间内频繁登录或修改账号信息，以免触发安全机制</li>\n  <li>建议使用代理IP登录，避免账号异常</li>\n  <li>请勿发布违规内容，以免账号被封</li>\n</ul>\n\n<h2>售后说明</h2>\n<p>本店所售社交媒体账号均为真实账号，购买后3天内提供更换服务。</p>\n\n<h2>免责声明</h2>\n<p>请勿将账号用于非法用途，账号被封禁概不负责。</p>\n"}]),il=()=>{Ze.value=!0},rl=e=>{"bind"===Le.templateMode?(Le.templateId=e.id,ol(e),S.success(`已绑定"${e.name}"模板，商品详情将随模板更新而更新`)):(ol(e),S.success(`已应用"${e.name}"模板内容`))},ol=e=>{let l=e.content;l=l.replace(/\${category}/g,Le.category||"无"),Le.description=l},sl=()=>{const e=tl.value.find((e=>1===e.id))||tl.value[0];e&&("bind"===Le.templateMode?(Le.templateId=e.id,ol(e),S.success(`已绑定"${e.name}"模板`)):(ol(e),S.success(`已插入"${e.name}"模板内容`)))},nl=()=>{al.push("/templates")},cl=()=>{if(!Le.currentPrice)return void S.warning("请先设置当前价格，再添加批发价区间");if(Array.isArray(Le.wholesalePrices)||(Le.wholesalePrices=[]),Le.wholesalePrices.length>=3)return void S.warning("最多只能设置3个批发价区间");const e=Le.wholesalePrices.length>0?Math.max(...Le.wholesalePrices.map((e=>e.quantity)))+50:10,l=.9*Le.currentPrice;Le.wholesalePrices.push({quantity:e,price:parseFloat(l.toFixed(2))}),ul()},ul=()=>{if(!Array.isArray(Le.wholesalePrices))return void(Le.wholesalePrices=[]);Le.wholesalePrices=Le.wholesalePrices.filter((e=>e&&e.quantity>0&&e.price>0));const e=Le.wholesalePrices.map((e=>e.quantity));e.length!==new Set(e).size&&S.warning("批发价设置中存在重复的数量，请修正");Le.wholesalePrices.some((e=>e.price>=Le.currentPrice))&&Le.currentPrice>0&&S.warning("批发价应低于商品单价，请修正"),Le.wholesalePrices.sort(((e,l)=>e.quantity-l.quantity));let l=!0;for(let a=1;a<Le.wholesalePrices.length;a++)if(Le.wholesalePrices[a].price>Le.wholesalePrices[a-1].price){l=!1;break}l||S.warning('批发价应遵循"数量越多价格越低"的原则，请修正')},dl=e=>{if(!e||e<=0)return"无折扣";if(!Le.currentPrice||Le.currentPrice<=0)return"无折扣";if(e>=Le.currentPrice)return"无折扣";return`${(e/Le.currentPrice*10).toFixed(1)}折`},pl=i((()=>Le.wholesalePrices&&Array.isArray(Le.wholesalePrices)&&0!==Le.wholesalePrices.length?[...Le.wholesalePrices].filter((e=>e&&e.quantity>0&&e.price>0)).sort(((e,l)=>e.quantity-l.quantity)):[]));t((()=>Le.currentPrice),(e=>{if(e>0&&Le.wholesalePrices&&Le.wholesalePrices.length>0){Le.wholesalePrices.some((l=>l.price>=e))&&S.warning("当前价格已变更，请检查批发价设置")}}));const ml=()=>{"custom"===Le.templateMode&&(Le.templateId=0)},hl=()=>{const e=tl.value.find((e=>e.id===Le.templateId));return e?e.name:"未选择模板"},fl=e=>{if(e){const l=tl.value.find((l=>l.id===e));l&&(ol(l),S.success(`已绑定"${l.name}"模板，商品详情将随模板更新而更新`))}},gl=()=>{if(bl.value=[],!Le.costPrice||Le.costPrice<=0)return void S.warning("请先设置有效的成本价");if(!Le.currentPrice||Le.currentPrice<=0)return void S.warning("请先设置有效的当前价格");const e=Le.wholesalePrices&&Array.isArray(Le.wholesalePrices)?[...Le.wholesalePrices].filter((e=>e&&"object"==typeof e&&e.quantity>0&&e.price>0)):[];0!==e.length?wl(e):S.warning("请先设置批发价区间后再进行预验算")},wl=e=>{const l=[];e.sort(((e,l)=>e.price-l.price));const a=e.length>0?e[0].price:Le.currentPrice;(a/Le.currentPrice*10).toFixed(1);const t=Math.min(100,95,90,85),i=t/100,r=(t/10).toFixed(1)+"折",o=a*i,s=o-Le.costPrice,n=(s/o*100).toFixed(1)+"%";let c="正常",u="success";s<0?(c="亏损",u="danger",bl.value.push(`最终成交价(¥${o.toFixed(2)})低于成本价(¥${Le.costPrice.toFixed(2)})，将导致亏损！`)):s/o*100<15&&(c="低利润",u="warning",bl.value.push(`最终成交价利润率仅为${n}，建议提高售价以确保合理利润`)),l.push({type:"价格验算",price:Le.currentPrice,memberDiscount:r,wholesaleDiscount:`¥${a.toFixed(2)}`,lowestPrice:o,profit:s,profitRate:n,status:c,statusType:u,highlight:!0}),vl.value=l,yl.value=!0,S.success("价格预验算完成")};r((()=>{const e=ll.query;e.name&&(D.name=e.name),e.id,e.stockWarningStatus&&(D.stockWarningStatus=e.stockWarningStatus),Oe()}));const yl=a(!1),vl=a([]),bl=a([]),Pl=i((()=>{if(!vl.value||0===vl.value.length)return{type:"info",text:"未验算"};if(vl.value.some((e=>e.profit<0)))return{type:"danger",text:"亏损"};return vl.value.some((e=>e.profit>0&&e.profit/e.price*100<10))?{type:"warning",text:"低利润"}:{type:"success",text:"利润正常"}})),kl=e=>{if(!e||!Le.costPrice)return"";const l=(e-Le.costPrice)/e*100;return l<0?"profit-negative":l<10?"profit-low":l>=30?"profit-high":"profit-normal"},_l=i((()=>Le.wholesalePrices&&Le.wholesalePrices.length>0)),Vl=()=>{Le.costPrice>Le.currentPrice&&(Le.costPrice=Le.currentPrice,S.warning("成本价不能高于当前价格，已自动调整"))};return(e,l)=>{const a=u("el-button"),t=u("el-input"),i=u("el-form-item"),r=u("el-option"),o=u("el-select"),$=u("el-form"),Oe=u("el-table-column"),Ee=u("el-tag"),ll=u("el-popover"),al=u("el-switch"),ol=u("el-table"),wl=u("el-pagination"),bl=u("el-card"),xl=u("el-input-number"),Ml=u("el-icon"),ql=u("el-tooltip"),Gl=u("el-alert"),Il=u("el-empty"),Tl=u("el-radio"),Cl=u("el-radio-group"),Ul=u("el-tab-pane"),Fl=u("el-dropdown-item"),Wl=u("el-dropdown-menu"),zl=u("el-dropdown"),Sl=u("el-button-group"),Bl=u("el-tabs"),$l=u("el-dialog"),Dl=f("loading");return d(),s("div",j,[n(bl,{class:"box-card"},{header:c((()=>[p("div",N,[l[23]||(l[23]=p("span",null,"商品管理",-1)),n(a,{type:"primary",onClick:Xe},{default:c((()=>l[22]||(l[22]=[h("新增商品")]))),_:1})])])),default:c((()=>[l[30]||(l[30]=p("div",{class:"page-description"},[p("p",null,"管理所有邮箱账号和社交媒体账号商品，包括Gmail、微软邮箱、Instagram、Twitter、Facebook等账号。您可以添加、编辑、删除商品，并设置商品的价格、库存、发货方式等信息。")],-1)),p("div",L,[n($,{inline:!0,model:D,class:"demo-form-inline"},{default:c((()=>[n(i,{label:"商品名称"},{default:c((()=>[n(t,{modelValue:D.name,"onUpdate:modelValue":l[0]||(l[0]=e=>D.name=e),placeholder:"请输入商品名称",clearable:""},null,8,["modelValue"])])),_:1}),n(i,{label:"商品分类"},{default:c((()=>[n(o,{modelValue:D.category,"onUpdate:modelValue":l[1]||(l[1]=e=>D.category=e),placeholder:"请选择",clearable:"",style:{width:"168px"}},{default:c((()=>[n(r,{label:"全部",value:""}),n(r,{label:"谷歌邮箱",value:"gmail"}),n(r,{label:"微软邮箱",value:"microsoft"}),n(r,{label:"Instagram账号",value:"instagram"}),n(r,{label:"Twitter账号",value:"twitter"}),n(r,{label:"Facebook账号",value:"facebook"}),n(r,{label:"其他账号",value:"other"})])),_:1},8,["modelValue"])])),_:1}),n(i,{label:"发货方式"},{default:c((()=>[n(o,{modelValue:D.deliveryMethod,"onUpdate:modelValue":l[2]||(l[2]=e=>D.deliveryMethod=e),placeholder:"请选择",clearable:"",style:{width:"168px"}},{default:c((()=>[n(r,{label:"全部",value:""}),n(r,{label:"自动发货",value:"auto"}),n(r,{label:"手动发货",value:"manual"})])),_:1},8,["modelValue"])])),_:1}),n(i,{label:"状态"},{default:c((()=>[n(o,{modelValue:D.status,"onUpdate:modelValue":l[3]||(l[3]=e=>D.status=e),placeholder:"请选择",clearable:"",style:{width:"168px"}},{default:c((()=>[n(r,{label:"全部",value:""}),n(r,{label:"上架中",value:"on"}),n(r,{label:"已下架",value:"off"})])),_:1},8,["modelValue"])])),_:1}),n(i,{label:"库存预警"},{default:c((()=>[n(o,{modelValue:D.stockWarningStatus,"onUpdate:modelValue":l[4]||(l[4]=e=>D.stockWarningStatus=e),placeholder:"请选择",clearable:"",style:{width:"168px"}},{default:c((()=>[n(r,{label:"全部",value:""}),n(r,{label:"已达预警",value:"warning"}),n(r,{label:"未达预警",value:"normal"})])),_:1},8,["modelValue"])])),_:1}),n(i,null,{default:c((()=>[n(a,{type:"primary",onClick:He},{default:c((()=>l[24]||(l[24]=[h("查询")]))),_:1}),n(a,{onClick:Qe},{default:c((()=>l[25]||(l[25]=[h("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),m((d(),g(ol,{data:ze.value,style:{width:"100%"},border:"",stripe:""},{default:c((()=>[n(Oe,{prop:"id",label:"商品ID",width:"80"}),n(Oe,{prop:"name",label:"商品名称","min-width":"180"}),n(Oe,{prop:"category",label:"商品分类",width:"100"},{default:c((e=>{return[n(Ee,{type:(l=e.row.category,{"谷歌邮箱":"danger","微软邮箱":"success","Instagram账号":"warning","Twitter账号":"info","Facebook账号":"primary"}[l]||"info")},{default:c((()=>[h(w(e.row.category),1)])),_:2},1032,["type"])];var l})),_:1}),n(Oe,{label:"价格",width:"120"},{default:c((e=>[p("div",R,[p("span",O,"¥"+w(e.row.currentPrice),1),e.row.originalPrice?(d(),s("span",H,"¥"+w(e.row.originalPrice),1)):y("",!0)])])),_:1}),n(Oe,{prop:"stock",label:"库存",width:"80"},{default:c((e=>[p("span",{class:v({"low-stock":e.row.stock<(e.row.stockWarning||50)})},w(e.row.stock),3)])),_:1}),n(Oe,{prop:"stockWarning",label:"库存预警值",width:"100"}),n(Oe,{prop:"sales",label:"销量",width:"80"}),n(Oe,{prop:"deliveryMethod",label:"发货方式",width:"100"},{default:c((e=>[n(Ee,{type:"自动发货"===e.row.deliveryMethod?"success":"info"},{default:c((()=>[h(w(e.row.deliveryMethod),1)])),_:2},1032,["type"])])),_:1}),n(Oe,{label:"批发价",width:"120"},{default:c((e=>[e.row.wholesalePrices&&e.row.wholesalePrices.length>0?(d(),g(ll,{key:0,placement:"top",width:200,trigger:"hover"},{default:c((()=>[p("div",Q,[l[26]||(l[26]=p("div",{class:"wholesale-popover-title"},"批发价格设置",-1)),(d(!0),s(b,null,P(e.row.wholesalePrices,((e,l)=>(d(),s("div",{class:"wholesale-popover-item",key:l},[p("span",X,"≥"+w(e.quantity),1),p("span",E,"¥"+w(e.price.toFixed(2)),1)])))),128))])])),reference:c((()=>[n(Ee,{type:"warning",effect:"plain"},{default:c((()=>l[27]||(l[27]=[h("查看批发价")]))),_:1})])),_:2},1024)):(d(),s("span",J,"无批发价"))])),_:1}),n(Oe,{prop:"status",label:"状态",width:"100"},{default:c((e=>[n(al,{modelValue:e.row.statusBool,"onUpdate:modelValue":l=>e.row.statusBool=l,"active-value":!0,"inactive-value":!1,onChange:l=>((e,l)=>{const a=e?"上架":"下架";S.success(`商品"${l.name}"已${a}`),l.status=e?"上架中":"已下架"})(l,e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"]),p("span",K,w(e.row.statusBool?"上架中":"已下架"),1)])),_:1}),n(Oe,{prop:"remark",label:"备注","min-width":"120"}),n(Oe,{prop:"createTime",label:"创建时间",width:"180"}),n(Oe,{label:"操作",width:"160",fixed:"right"},{default:c((e=>[p("div",Y,[n(a,{size:"small",type:"primary",onClick:l=>{return a=e.row,je.value="edit",Object.assign(Le,a),Le.costPrice>Le.currentPrice&&(Le.costPrice=Le.currentPrice),Le.wholesalePrices&&Array.isArray(Le.wholesalePrices)||(Le.wholesalePrices=[]),void(Ae.value=!0);var a}},{default:c((()=>l[28]||(l[28]=[h("编辑")]))),_:2},1032,["onClick"]),n(a,{size:"small",type:"danger",onClick:l=>{return a=e.row,void B.confirm(`确定要删除商品"${a.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{S({type:"success",message:`商品"${a.name}"已删除`})})).catch((()=>{S({type:"info",message:"已取消删除"})}));var a}},{default:c((()=>l[29]||(l[29]=[h("删除")]))),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])),[[Dl,De.value]]),p("div",Z,[n(wl,{"current-page":Se.value,"onUpdate:currentPage":l[5]||(l[5]=e=>Se.value=e),"page-size":Be.value,"onUpdate:pageSize":l[6]||(l[6]=e=>Be.value=e),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:$e.value,onSizeChange:Ke,onCurrentChange:Ye,background:!0},null,8,["current-page","page-size","total"])])])),_:1}),n($l,{modelValue:Ae.value,"onUpdate:modelValue":l[21]||(l[21]=e=>Ae.value=e),title:"add"===je.value?"新增商品":"编辑商品",width:"750px"},{footer:c((()=>[p("span",We,[n(a,{onClick:l[20]||(l[20]=e=>Ae.value=!1)},{default:c((()=>l[60]||(l[60]=[h("取消")]))),_:1}),n(a,{type:"primary",onClick:Je},{default:c((()=>l[61]||(l[61]=[h("确定")]))),_:1})])])),default:c((()=>[n($,{model:Le,"label-width":"100px",rules:Re,ref_key:"productFormRef",ref:Ne},{default:c((()=>[n(i,{label:"商品名称",prop:"name"},{default:c((()=>[n(t,{modelValue:Le.name,"onUpdate:modelValue":l[7]||(l[7]=e=>Le.name=e),placeholder:"请输入商品名称"},null,8,["modelValue"])])),_:1}),n(i,{label:"商品分类",prop:"category"},{default:c((()=>[n(o,{modelValue:Le.category,"onUpdate:modelValue":l[8]||(l[8]=e=>Le.category=e),placeholder:"请选择商品分类",style:{width:"100%"}},{default:c((()=>[n(r,{label:"谷歌邮箱",value:"谷歌邮箱"}),n(r,{label:"微软邮箱",value:"微软邮箱"}),n(r,{label:"Instagram账号",value:"Instagram账号"}),n(r,{label:"Twitter账号",value:"Twitter账号"}),n(r,{label:"Facebook账号",value:"Facebook账号"}),n(r,{label:"Discord账号",value:"Discord账号"}),n(r,{label:"ChatGPT账号",value:"ChatGPT账号"}),n(r,{label:"雅虎邮箱",value:"雅虎邮箱"}),n(r,{label:"GMX邮箱",value:"GMX邮箱"}),n(r,{label:"TikTok账号",value:"TikTok账号"}),n(r,{label:"美国AOL邮箱",value:"美国AOL邮箱"}),n(r,{label:"ProtonMail邮箱",value:"ProtonMail邮箱"}),n(r,{label:"其他账号",value:"其他账号"})])),_:1},8,["modelValue"])])),_:1}),n(i,{label:"当前价格",prop:"currentPrice"},{default:c((()=>[n(xl,{modelValue:Le.currentPrice,"onUpdate:modelValue":l[9]||(l[9]=e=>Le.currentPrice=e),min:0,precision:2,step:.01,style:{width:"100%"},onChange:Vl},null,8,["modelValue"])])),_:1}),n(i,{label:"成本价",prop:"costPrice"},{default:c((()=>[n(xl,{modelValue:Le.costPrice,"onUpdate:modelValue":l[10]||(l[10]=e=>Le.costPrice=e),min:0,max:Le.currentPrice,precision:2,step:.01,style:{width:"100%"}},null,8,["modelValue","max"]),l[31]||(l[31]=p("div",{class:"form-tip"},"商品的成本价格，用于计算利润，不可高于当前价格",-1))])),_:1}),n(i,null,{default:c((()=>[n(a,{type:"primary",onClick:gl,disabled:!_l.value},{default:c((()=>l[32]||(l[32]=[h("预验算价格")]))),_:1},8,["disabled"]),l[33]||(l[33]=p("div",{class:"form-tip"},"请设置批发价后点击预验算，检查价格合理性",-1))])),_:1}),yl.value?(d(),g(i,{key:0},{default:c((()=>[n(bl,{shadow:"hover",class:"price-validation-card"},{header:c((()=>[p("div",ee,[l[34]||(l[34]=p("span",null,"价格预验算结果",-1)),n(Ee,{type:Pl.value.type,size:"small"},{default:c((()=>[h(w(Pl.value.text),1)])),_:1},8,["type"])])])),default:c((()=>[l[35]||(l[35]=p("div",{class:"price-validation-description"},[p("p",null,"此表格展示了最优惠批发价与最高会员折扣组合后的最终成交价，并计算是否会导致亏损。")],-1)),n(ol,{data:vl.value,border:"",stripe:"",size:"small"},{default:c((()=>[n(Oe,{label:"价格类型",prop:"type",width:"150"}),n(Oe,{label:"成本价",width:"100"},{default:c((e=>[p("span",null,"¥"+w(Le.costPrice.toFixed(2)),1)])),_:1}),n(Oe,{label:"当前价格",width:"120"},{default:c((e=>[p("span",{class:v({"highlight-price":e.row.highlight})},"¥"+w(e.row.price.toFixed(2)),3)])),_:1}),n(Oe,{label:"折扣情况",width:"180"},{default:c((e=>[e.row.memberDiscount&&"-"!==e.row.memberDiscount?(d(),s("div",le,[p("div",null,"最高会员折扣: "+w(e.row.memberDiscount),1)])):y("",!0),e.row.wholesaleDiscount&&"-"!==e.row.wholesaleDiscount?(d(),s("div",ae,[p("div",null,"最优惠批发价: "+w(e.row.wholesaleDiscount),1)])):y("",!0),e.row.memberDiscount&&"-"!==e.row.memberDiscount||e.row.wholesaleDiscount&&"-"!==e.row.wholesaleDiscount?y("",!0):(d(),s("span",te,"-"))])),_:1}),n(Oe,{label:"最终成交价",width:"100"},{default:c((e=>[void 0!==e.row.lowestPrice?(d(),s("span",ie,"¥"+w(e.row.lowestPrice.toFixed(2)),1)):(d(),s("span",re,"-"))])),_:1}),n(Oe,{label:"利润率",width:"100"},{default:c((e=>[void 0!==e.row.profitRate?(d(),s("span",{key:0,class:v(["profit-text",kl(e.row.lowestPrice||e.row.price)])},w(e.row.profitRate),3)):(d(),s("span",oe,"-"))])),_:1}),n(Oe,{label:"是否亏损",width:"100"},{default:c((e=>[e.row.status?(d(),g(Ee,{key:0,type:e.row.statusType,size:"small"},{default:c((()=>[h(w(e.row.status),1)])),_:2},1032,["type"])):(d(),s("span",se,"-"))])),_:1})])),_:1},8,["data"])])),_:1})])),_:1})):y("",!0),n(i,{label:"原价",prop:"originalPrice"},{default:c((()=>[n(xl,{modelValue:Le.originalPrice,"onUpdate:modelValue":l[11]||(l[11]=e=>Le.originalPrice=e),min:0,precision:2,step:.01,style:{width:"100%"}},null,8,["modelValue"]),l[36]||(l[36]=p("div",{class:"form-tip"},"商品的原始价格，用于显示折扣效果",-1))])),_:1}),n(i,{label:"批发价设置"},{default:c((()=>[n(bl,{shadow:"never",class:"wholesale-card"},{header:c((()=>[p("div",ne,[p("div",ce,[l[37]||(l[37]=p("span",{class:"wholesale-title"},"批发价格区间设置",-1)),n(ql,{content:"设置不同数量区间的批发价格，客户购买数量达到要求时将自动享受优惠，最多支持3个区间",placement:"top"},{default:c((()=>[n(Ml,{class:"wholesale-help-icon"},{default:c((()=>[n(k(M))])),_:1})])),_:1})]),n(a,{type:"primary",size:"small",onClick:V(cl,["prevent"])},{default:c((()=>[n(Ml,null,{default:c((()=>[n(k(x))])),_:1}),l[38]||(l[38]=h("添加区间 "))])),_:1})])])),default:c((()=>[Le.wholesalePrices&&Le.wholesalePrices.length>0?(d(),s("div",ue,[n(Gl,{type:"info",closable:!1,"show-icon":""},{title:c((()=>[p("span",null,[l[39]||(l[39]=h("当前单价: ")),p("span",de,"¥"+w(Le.currentPrice.toFixed(2)),1)])])),default:c((()=>l[40]||(l[40]=[p("p",{class:"wholesale-tip"},"设置批发价格区间，当客户购买数量达到要求时将自动享受优惠价格。请确保批发价低于单价，且数量越多价格越优惠。最多支持3个批发价区间。",-1)]))),_:1})])):y("",!0),Le.wholesalePrices&&Le.wholesalePrices.length>0?(d(),s("div",pe,[n(ol,{data:Le.wholesalePrices,border:"",stripe:"",size:"small",class:"wholesale-table"},{default:c((()=>[n(Oe,{label:"序号",type:"index",width:"70",align:"center"}),n(Oe,{label:"起批数量","min-width":"200"},{default:c((e=>[p("div",me,[l[41]||(l[41]=p("span",{class:"wholesale-prefix"},"大于",-1)),n(xl,{modelValue:e.row.quantity,"onUpdate:modelValue":l=>e.row.quantity=l,min:1,precision:0,size:"small",class:"wholesale-quantity-input",placeholder:"数量","controls-position":"right",onChange:ul},null,8,["modelValue","onUpdate:modelValue"]),l[42]||(l[42]=p("span",{class:"wholesale-unit"},"件",-1))])])),_:1}),n(Oe,{label:"批发单价","min-width":"200"},{default:c((e=>[p("div",he,[l[43]||(l[43]=p("span",{class:"wholesale-prefix"},"单价",-1)),n(xl,{modelValue:e.row.price,"onUpdate:modelValue":l=>e.row.price=l,min:.01,precision:2,step:.01,size:"small",class:"wholesale-price-input",placeholder:"价格","controls-position":"right",onChange:ul},null,8,["modelValue","onUpdate:modelValue"]),l[44]||(l[44]=p("span",{class:"wholesale-unit"},"元",-1))])])),_:1}),n(Oe,{label:"优惠","min-width":"120"},{default:c((e=>[p("span",{class:v(["discount-text",{"discount-invalid":e.row.price>=Le.currentPrice}])},w(dl(e.row.price)),3)])),_:1}),n(Oe,{label:"操作",width:"100",align:"center"},{default:c((e=>[n(a,{type:"danger",size:"small",circle:"",onClick:l=>{return a=e.$index,void Le.wholesalePrices.splice(a,1);var a},class:"wholesale-delete"},{default:c((()=>[n(Ml,null,{default:c((()=>[n(k(_))])),_:1})])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),p("div",fe,[l[45]||(l[45]=p("div",{class:"wholesale-preview-title"},"批发价格预览",-1)),p("div",ge,[(d(!0),s(b,null,P(pl.value,((e,l)=>(d(),g(Ee,{key:l,size:"large",type:"danger",effect:"plain",class:"wholesale-preview-tag"},{default:c((()=>[h(" 大于"+w(e.quantity)+"单价¥"+w(e.price.toFixed(2)),1)])),_:2},1024)))),128))])])])):(d(),s("div",we,[n(Il,{description:"暂无批发价设置","image-size":60},{description:c((()=>l[46]||(l[46]=[p("p",null,"设置批发价可以鼓励客户批量购买，提高销售额",-1)]))),default:c((()=>[n(a,{type:"primary",onClick:V(cl,["prevent"])},{default:c((()=>[n(Ml,null,{default:c((()=>[n(k(x))])),_:1}),l[47]||(l[47]=h("添加批发价区间 "))])),_:1})])),_:1})]))])),_:1})])),_:1}),n(i,{label:"发货方式",prop:"deliveryMethod"},{default:c((()=>[n(Cl,{modelValue:Le.deliveryMethod,"onUpdate:modelValue":l[12]||(l[12]=e=>Le.deliveryMethod=e)},{default:c((()=>[n(Tl,{label:"自动发货"},{default:c((()=>l[48]||(l[48]=[h("自动发货")]))),_:1}),n(Tl,{label:"手动发货"},{default:c((()=>l[49]||(l[49]=[h("手动发货")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),n(i,{label:"商品详情",prop:"description"},{default:c((()=>[p("div",ye,[p("div",ve,[n(Bl,{modelValue:Le.templateMode,"onUpdate:modelValue":l[14]||(l[14]=e=>Le.templateMode=e),onTabChange:ml,type:"card"},{default:c((()=>[n(Ul,{label:"使用模板",name:"bind"},{default:c((()=>[p("div",be,[p("div",Pe,[n(o,{modelValue:Le.templateId,"onUpdate:modelValue":l[13]||(l[13]=e=>Le.templateId=e),placeholder:"请选择模板",style:{width:"300px"},onChange:fl},{default:c((()=>[(d(!0),s(b,null,P(tl.value,(e=>(d(),g(r,{key:e.id,label:e.name,value:e.id},{default:c((()=>[p("div",ke,[p("span",null,w(e.name),1),e.category?(d(),g(Ee,{key:0,size:"small",type:"info"},{default:c((()=>[h(w(e.category),1)])),_:2},1024)):y("",!0)])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"]),n(ql,{content:"管理模板",placement:"top"},{default:c((()=>[n(a,{type:"primary",circle:"",plain:"",onClick:nl},{default:c((()=>[n(Ml,null,{default:c((()=>[n(k(q))])),_:1})])),_:1})])),_:1})]),Le.templateId?(d(),s("div",_e,[n(Ee,{type:"success",effect:"dark"},{default:c((()=>[n(Ml,null,{default:c((()=>[n(k(G))])),_:1}),p("span",Ve,"已绑定模板："+w(hl()),1)])),_:1}),l[50]||(l[50]=p("span",{class:"template-hint"},"模板内容将随模板更新而自动更新",-1))])):(d(),s("div",xe,[n(Ee,{type:"warning",effect:"dark"},{default:c((()=>[n(Ml,null,{default:c((()=>[n(k(I))])),_:1}),l[51]||(l[51]=p("span",{style:{"margin-left":"5px"}},"未选择模板",-1))])),_:1}),l[52]||(l[52]=p("span",{class:"template-hint"},"请从下拉菜单中选择一个模板",-1))]))])])),_:1}),n(Ul,{label:"自定义内容",name:"custom"},{default:c((()=>[p("div",Me,[p("div",qe,[n(Sl,null,{default:c((()=>[n(a,{type:"primary",onClick:sl},{default:c((()=>[n(Ml,null,{default:c((()=>[n(k(T))])),_:1}),l[53]||(l[53]=h(" 插入默认模板 "))])),_:1}),n(zl,{onCommand:rl,trigger:"click"},{dropdown:c((()=>[n(Wl,null,{default:c((()=>[(d(!0),s(b,null,P(tl.value,(e=>(d(),g(Fl,{key:e.id,command:e},{default:c((()=>[p("div",Ge,[p("span",null,w(e.name),1),e.category?(d(),g(Ee,{key:0,size:"small",type:"info"},{default:c((()=>[h(w(e.category),1)])),_:2},1024)):y("",!0)])])),_:2},1032,["command"])))),128))])),_:1})])),default:c((()=>[n(a,{type:"primary"},{default:c((()=>[n(Ml,null,{default:c((()=>[n(k(C))])),_:1}),l[54]||(l[54]=h(" 选择模板 ")),n(Ml,{class:"el-icon--right"},{default:c((()=>[n(k(U))])),_:1})])),_:1})])),_:1})])),_:1}),p("div",Ie,[n(a,{onClick:il,type:"success",plain:""},{default:c((()=>[n(Ml,null,{default:c((()=>[n(k(F))])),_:1}),l[55]||(l[55]=h(" 预览效果 "))])),_:1}),n(ql,{content:"管理模板",placement:"top"},{default:c((()=>[n(a,{type:"info",circle:"",plain:"",onClick:nl},{default:c((()=>[n(Ml,null,{default:c((()=>[n(k(q))])),_:1})])),_:1})])),_:1})])]),p("div",Te,[n(Ee,{type:"info",effect:"plain"},{default:c((()=>[n(Ml,null,{default:c((()=>[n(k(W))])),_:1}),l[56]||(l[56]=p("span",{style:{"margin-left":"5px"}},"自定义模式",-1))])),_:1}),l[57]||(l[57]=p("span",{class:"template-hint"},"您可以自由编辑内容，但不会随模板更新而自动更新",-1))])])])),_:1})])),_:1},8,["modelValue"])]),p("div",{class:v(["editor-wrapper",{"editor-readonly":"bind"===Le.templateMode}])},[n(k(A),{content:Le.description,"onUpdate:content":l[15]||(l[15]=e=>Le.description=e),contentType:"html",theme:"snow",toolbar:"full",options:el,style:{height:"400px"},readonly:"bind"===Le.templateMode},null,8,["content","readonly"]),"bind"===Le.templateMode?(d(),s("div",Ce,[n(Ml,{class:"lock-icon"},{default:c((()=>[n(k(z))])),_:1}),l[58]||(l[58]=p("p",null,'模板内容由系统管理，如需自定义请切换到"自定义内容"模式',-1))])):y("",!0)],2)])])),_:1}),n(i,{label:"状态"},{default:c((()=>[n(al,{modelValue:Le.statusBool,"onUpdate:modelValue":l[16]||(l[16]=e=>Le.statusBool=e),"active-value":!0,"inactive-value":!1},null,8,["modelValue"]),p("span",Ue,w(Le.statusBool?"上架":"下架"),1)])),_:1}),n(i,{label:"库存预警值",prop:"stockWarning"},{default:c((()=>[n(xl,{modelValue:Le.stockWarning,"onUpdate:modelValue":l[17]||(l[17]=e=>Le.stockWarning=e),min:0,precision:0,step:1,style:{width:"100%"}},null,8,["modelValue"]),l[59]||(l[59]=p("div",{class:"form-tip"},"当库存低于此值时将发出预警提醒",-1))])),_:1}),n(i,{label:"备注",prop:"remark"},{default:c((()=>[n(t,{modelValue:Le.remark,"onUpdate:modelValue":l[18]||(l[18]=e=>Le.remark=e),type:"textarea",rows:2,placeholder:"请输入商品备注信息"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),n($l,{modelValue:Ze.value,"onUpdate:modelValue":l[19]||(l[19]=e=>Ze.value=e),title:"内容预览",width:"70%","destroy-on-close":""},{default:c((()=>[p("div",{class:"preview-container",innerHTML:Le.description},null,8,Fe)])),_:1},8,["modelValue"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-5b5c97c9"]]);export{ze as default};
